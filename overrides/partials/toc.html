<!-- Custom version of https://github.com/squidfunk/mkdocs-material/blob/5.5.6/src/partials/toc.html -->

{% import "partials/language.html" as lang with context %}

<!-- Table of contents -->
<nav class="md-nav md-nav--secondary" aria-label="{{ lang.t('toc.title') }}">
  {% set toc = page.toc %}

  <!--
    Hack: check whether the content contains a h1 headline. If it does, the
    top-level anchor must be skipped, since it would be redundant to the link
    to the current page that is located just above the anchor. Therefore we
    directly continue with the children of the anchor.
  -->
  {% if toc | first is defined and "\x3ch1 id=" in page.content %}
    {% set toc = (toc | first).children %}
  {% endif %}

  <!-- Render item list -->
  {% if toc | first is defined %}
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        {% include ".icons/material/arrow-left.svg" %}
      </span>
      <!-- Customization: Use the page title instead of the text "Table of contents" -->
      {{ page.title }}
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      {% for toc_item in toc %}
        {% include "partials/toc-item.html" %}
      {% endfor %}
    </ul>
  {% endif %}
</nav>
