
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="https://operations.systemlink.io/data-stores/mongodb/" rel="canonical"/>
<link href="../../img/favicon.ico" rel="shortcut icon"/>
<meta content="mkdocs-1.1.2, mkdocs-material-5.5.12" name="generator"/>
<title>MongoDB - SystemLink Operations Handbook</title>
<link href="../../assets/stylesheets/main.4dd2dd8d.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.6a5ad368.min.css" rel="stylesheet"/>
<link href="../../stylesheets/extra.css" rel="stylesheet"/>
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-126136185-4","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}),document.addEventListener("DOMContentSwitch",function(){ga("send","pageview",document.location.pathname)})</script>
<script async="" src="https://www.google-analytics.com/analytics.js"></script>
</head>
<body data-md-color-accent="" data-md-color-primary="" data-md-color-scheme="ni" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#mongodb">7. 
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header-nav md-grid">
<a aria-label="SystemLink Operations Handbook" class="md-header-nav__button md-logo" href="https://operations.systemlink.io" title="SystemLink Operations Handbook">
<svg style="enable-background:new 0 0 32 32;" version="1.1" viewbox="0 0 32 32" x="0px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" y="0px">
<style type="text/css">
	.st0{fill:#044123;}
	.st1{fill:#FFFFFF;}
	.st2{display:none;}
	.st3{display:inline;fill:#D3519D;fill-opacity:0.46;}
	.st4{display:inline;opacity:0.45;fill:#D3519D;}
</style>
<g id="Layer_1">
<g>
<path class="st0" d="M0,32V0l21.28,0C27.2,0.01,32,4.81,32,10.73V32H0z"></path>
</g>
<g>
<g>
<g>
<g>
<path class="st1" d="M15,17h-4c0,0,0-1.05,0-2.44c0-1.51,0.64-2.8,1.82-3.61c0.9-0.62,2.1-0.95,3.47-0.95H24v4h-7.21
						C15.5,14,15,14.63,15,15.7C15,16.43,15,17,15,17z"></path>
</g>
</g>
</g>
<g>
<g>
<g>
<path class="st1" d="M17,16h4c0,0,0,1.05,0,2.44c0,1.51-0.64,2.8-1.82,3.61c-0.9,0.62-2.1,0.95-3.47,0.95H8v-4h7.21
						C16.5,19,17,18.37,17,17.3C17,16.57,17,16,17,16z"></path>
</g>
</g>
</g>
</g>
</g>
<g class="st2" id="Layer_2">
<rect class="st3" height="16" width="16" x="8" y="8"></rect>
</g>
</svg>
</a>
<label class="md-header-nav__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"></path></svg>
</label>
<div class="md-header-nav__title" data-md-component="header-title">
<div class="md-header-nav__ellipsis">
<span class="md-header-nav__topic md-ellipsis">
            SystemLink Operations Handbook
          </span>
<span class="md-header-nav__topic md-ellipsis">
            
              MongoDB
            
          </span>
</div>
</div>
<label class="md-header-nav__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" data-md-state="active" name="query" placeholder="Search" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</label>
<button aria-label="Clear" class="md-search__icon md-icon" data-md-component="search-reset" tabindex="-1" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>
</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header-nav__source">
<a class="md-source" href="https://github.com/ni/systemlink-operations-handbook/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
    Table of Contents
  </label>
<div class="md-nav__source">
<a class="md-source" href="https://github.com/ni/systemlink-operations-handbook/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../.." title="Introduction">
      1. Introduction
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../network-security/network-security/" title="Network Security">
      2. Network Security
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../rbac/rbac/" title="Workspaces and Role-based Access Control">
      3. Workspaces and Role-based Access Control
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../openid-connect/openid-connect/" title="Single Sign-on with OpenID Connect">
      4. Single Sign-on with OpenID Connect
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../ldap/ldap/" title="Sign on with LDAP">
      5. Sign on with LDAP
    </a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="nav-6" id="nav-6" type="checkbox"/>
<label class="md-nav__link" for="nav-6">
      6. Data stores
      <span class="md-nav__icon md-icon"></span>
</label>
<nav aria-label="Data stores" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-6">
<span class="md-nav__icon md-icon"></span>
        6. Data stores
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../FileService-MinIO/" title="Leverage File Service S3 for on-premises storage">
      6. Leverage File Service S3 for on-premises storage
    </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
        6. MongoDB
        <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./" title="MongoDB">
      6. MongoDB
    </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      MongoDB
    </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#assumptions-and-prerequisites">7.1 
    Assumptions and Prerequisites
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#single-node-vs-multi-node-mongodb-deployments">7.2 
    Single Node vs Multi Node MongoDB Deployments
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#single-node-deployments">7.3 
    Single Node Deployments
  </a>
<nav aria-label="Single Node Deployments" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#increasing-the-index-cache-size-for-single-node-deployments">7.3.1 
    Increasing the index cache size for single node deployments
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#multi-node-deployments">7.4 
    Multi Node Deployments
  </a>
<nav aria-label="Multi Node Deployments" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#connecting-to-standalone-mongodb-instance">7.4.1 
    Connecting to Standalone MongoDB instance
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#connecting-to-mongodb-with-replica-sets">7.4.2 
    Connecting to MongoDB with Replica Sets
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#connecting-to-mongodb-atlas">7.4.3 
    Connecting to MongoDB Atlas
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../python-dataplugins/python-dataplugins/" title="Python DataPlugins">
      7. Python DataPlugins
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../preview-features/preview-features/" title="Preview Features">
      8. Preview Features
    </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      MongoDB
    </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#assumptions-and-prerequisites">7.1 
    Assumptions and Prerequisites
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#single-node-vs-multi-node-mongodb-deployments">7.2 
    Single Node vs Multi Node MongoDB Deployments
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#single-node-deployments">7.3 
    Single Node Deployments
  </a>
<nav aria-label="Single Node Deployments" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#increasing-the-index-cache-size-for-single-node-deployments">7.3.1 
    Increasing the index cache size for single node deployments
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#multi-node-deployments">7.4 
    Multi Node Deployments
  </a>
<nav aria-label="Multi Node Deployments" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#connecting-to-standalone-mongodb-instance">7.4.1 
    Connecting to Standalone MongoDB instance
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#connecting-to-mongodb-with-replica-sets">7.4.2 
    Connecting to MongoDB with Replica Sets
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#connecting-to-mongodb-atlas">7.4.3 
    Connecting to MongoDB Atlas
  </a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://github.com/ni/systemlink-operations-handbook/edit/master/handbook/data-stores/mongodb.md" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"></path></svg>
</a>
<h1 id="mongodb"><span class="enumerate-heading-plugin">7.</span> MongoDB<a class="headerlink" href="#mongodb" title="Permanent link">¶</a></h1>
<p>The majority of SystemLink services use <a href="https://www.mongodb.com">MongoDB</a> as the primary database. Default installations of SystemLink include MongoDB Community Edition, which launches when the SystemLink server boots. This is referred to as a <a href="#single-node-deployments">7.3 <em>single node</em></a> deployment.</p>
<p>You can also host MongoDB on a separate standalone server, a <a href="https://docs.mongodb.com/manual/replication/">replica set</a> of three or more servers, or use MongoDB's platform as a service offering, <a href="https://www.mongodb.com/cloud/atlas">MongoDB Atlas</a>. This is referred to as a <a href="#multi-node-deployments">7.4 <em>multi node</em></a> deployment.</p>
<h2 id="assumptions-and-prerequisites"><span class="enumerate-heading-plugin">7.1</span> Assumptions and Prerequisites<a class="headerlink" href="#assumptions-and-prerequisites" title="Permanent link">¶</a></h2>
<p>Before you configure a remote MongoDB instance to use with SystemLink, ensure you have the following:</p>
<ul>
<li>A server running SystemLink 2021 R1 or greater. Refer to <a href="https://www.ni.com/documentation/en/systemlink/latest/setup/configuring-systemlink-server-clients/">Installing and Configuring SystemLink Server and Clients</a> for the basics of setting up a SystemLink server.</li>
<li>A standalone server running MongoDB, multiple servers hosting a MongoDB replica set, or a MongoDB Atlas Account</li>
<li>A user with the <code>readWriteAnyDatabase</code> or similar role. Refer to <a href="https://docs.mongodb.com/manual/core/authorization/">Role-Based Access Control</a> for details. You reference this user in the MongoDB connection fields or connection string in <strong>NI SystemLink Server Configuration</strong>.</li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Due to a bug in a third-party MongoDB driver, SystemLink cannot connect to MongoDB instances where the MongoDB username either the <code>-</code> or the <code>_</code> character.</p>
</div>
<h2 id="single-node-vs-multi-node-mongodb-deployments"><span class="enumerate-heading-plugin">7.2</span> Single Node vs Multi Node MongoDB Deployments<a class="headerlink" href="#single-node-vs-multi-node-mongodb-deployments" title="Permanent link">¶</a></h2>
<p>The following table summarizes when to use the various supported configurations of MongoDB with SystemLink.</p>
<table>
<thead>
<tr>
<th>Diagram</th>
<th>SystemLink + MongoDB Configuration</th>
<th>When to use</th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="../../img/single-box.png" width="1500px"/></td>
<td>Single node with defaults</td>
<td>You have one server hosting both MongoDB and SystemLink. Use this during evaluation, when working with less than 10 managed nodes, and in deployments that don't need the Asset Manager and Test Insights modules.</td>
</tr>
<tr>
<td><img src="../../img/single-box.png" width="1500px"/></td>
<td>Single node with increased index cache</td>
<td>You have one server hosting both MongoDB and SystemLink. Use this during evaluation, in moderate deployments of less than 25 managed nodes, and for moderate usage of the Test Insights module producing less than 100 test steps and results each day.</td>
</tr>
<tr>
<td><img src="../../img/mdb-sa.png" width="1500px"/></td>
<td>Multi node with a single standalone MongoDB Instance</td>
<td>You have SystemLink and MongoDB hosted on two separate servers. Use this configuration when the CPU, memory, and disk consumption of the MongoDB Windows service is impacting the operation of SystemLink services. While this configuration provides for greater reliability by splitting the servers running SystemLink and MongoDB, it does not provide greater redundancy for data storage.</td>
</tr>
<tr>
<td><img src="../../img/mdb-rs.png" width="1500px"/></td>
<td>Multi node with MongoDB replica sets</td>
<td>You have one dedicated server hosting SystemLink and three or more servers hosting MongoDB. <strong>NI recommends this configuration for all production deployments including small and moderately sized deployments.</strong> Use this to enable greater scale (&gt;50 managed nodes, &gt;1000 test steps and results daily). This configuration mitigates data loss with redundant replica sets. Refer to <a href="https://docs.mongodb.com/manual/tutorial/deploy-replica-set/">MongoDB documentation</a> for setting up and hosting a MongoDB instance with replica sets.</td>
</tr>
<tr>
<td><img src="../../img/mdb-atlas.png" width="1500px"/></td>
<td>Multi node with MongoDB Atlas</td>
<td>You have one dedicated server hosting SystemLink and are connecting to a MongoDB Atlas cluster. Use this configuration for large scale deployments (&gt;200 managed nodes, 10,000 test steps and results daily) or to simplify database provisioning, operation, backup and restore. Refer to <a href="https://www.mongodb.com/cloud/atlas">MongoDB Atlas</a> for details on this service.</td>
</tr>
</tbody>
</table>
<h2 id="single-node-deployments"><span class="enumerate-heading-plugin">7.3</span> Single Node Deployments<a class="headerlink" href="#single-node-deployments" title="Permanent link">¶</a></h2>
<p>By default, SystemLink stores all data on locally hosted databases and the local file system. For more reliable data storage and scalability, NI recommends <a href="#multi-node-deployments">7.4 remote data stores</a> for all production deployments.</p>
<h3 id="increasing-the-index-cache-size-for-single-node-deployments"><span class="enumerate-heading-plugin">7.3.1</span> Increasing the index cache size for <em>single node</em> deployments<a class="headerlink" href="#increasing-the-index-cache-size-for-single-node-deployments" title="Permanent link">¶</a></h3>
<p>Increase the index cache size to process more data and use the Test Insights or Asset Management modules in a single-node deployment. This avoids high CPU usage that can occur with the default MongoDB memory constraint in SystemLink. NI recommends increasing the available memory for the index to 8GB. Refer to <a href="https://www.ni.com/documentation/en/systemlink/latest/setup/sizing-a-systemlink-server/">Sizing a SystemLink Server</a> for system requirements to run SystemLink.</p>
<ol>
<li>Log into the desktop of the SystemLink server with administrator privileges.</li>
<li>Open <strong>NI SystemLink Server Configuration</strong>.</li>
<li>Navigate to <strong>NoSqlDatabase</strong>.</li>
<li>Under <strong>The NoSqlServer is launched and managed by SystemLink</strong>, adjust the value in <strong>The cache size of the database in Gigabytes (GB)</strong>.</li>
<li>Click <strong>Apply</strong>.</li>
</ol>
<figure>
<img src="../../img/mdb-cache.png" width="500"/>
<figcaption>SystemLink's NoSqlDatabase configuration set to 8BG</figcaption>
</figure>
<h2 id="multi-node-deployments"><span class="enumerate-heading-plugin">7.4</span> Multi Node Deployments<a class="headerlink" href="#multi-node-deployments" title="Permanent link">¶</a></h2>
<p>SystemLink supports three types of multi-node configuration. You can configure SystemLink to connect to a standalone instance, replica sets, or MongoDB Atlas.</p>
<p>NI recommends connecting SystemLink to a replica set of three or more MongoDB members or MongoDB Atlas for all production deployments.</p>
<ul>
<li>NI does not support configurations where multiple SystemLink servers use the same MongoDB instance.</li>
<li>NI does not support configurations where another application uses the same MongoDB instance as SystemLink.</li>
<li>While SystemLink can connect to and use a sharded MongoDB cluster (<code>mongos</code>), it will not take advantage of horizontal scaling capabilities enabled by sharded clusters.</li>
<li>When using MongoDB Atlas or <a href="https://www.mongodb.com/products/mongodb-enterprise-advanced">MongoDB Enterprise Advanced</a>, you can encrypt the data stored within the database.</li>
</ul>
<div class="admonition important">
<p class="admonition-title">Connection String Formats</p>
<p>The following connection string formats are unsupported or could cause issues in some environments:</p>
<ul>
<li>Connection strings that contain the query parameter <code>tls=</code> are unsupported. Use the <code>ssl=</code> query string to achieve the same degree of security.</li>
<li>In environments where the 4.2.2.1 root DNS server cannot be reached, the DNS seed list URI format (<code>mongodb+srv://</code>) will fail due to a bug (<a href="https://github.com/kobil-systems/mongodb/issues/358">Unable to connect to Atlas due to DNS connectivity issues #358</a>) in a third-party MongoDB driver. In this case, use the <a href="https://docs.mongodb.com/manual/reference/connection-string/#std-label-connections-standard-connection-string-format">MongoDB standard connection string format</a> to connect your replica set. This affects both self-hosted replica sets and MongoDB Atlas.<ul>
<li>The <code>mongodb+srv://</code> URI format provides for more flexible deployments because clients will not need a new connection string should the servers in the replica set change.</li>
</ul>
</li>
<li>When URL escaping characters in your connection string, you must use uppercase characters, e.g. <code>%2F</code> not <code>%2f</code>.</li>
</ul>
<p>Example connection string in the standard connection string format (line breaks for readability):</p>
<div class="highlight"><pre><span></span><code>mongodb://myusername:&lt;password&gt;@
ec2-123-123-12.compute-1.amazonaws.com27017,
ec2-234-234-23.compute-1.amazonaws.com:27017,
ec2-456-456-45.compute-1.amazonaws.com:27017/
?authSource=admin
&amp;replicaSet=rs0
&amp;readPreference=primary
&amp;ssl=true
</code></pre></div>
<p>Consider using <a href="mongodb compass">MongoDB Compass</a> to connect to your replica set to help construct a valid connection string and verify the configuration.</p>
</div>
<h3 id="connecting-to-standalone-mongodb-instance"><span class="enumerate-heading-plugin">7.4.1</span> Connecting to Standalone MongoDB instance<a class="headerlink" href="#connecting-to-standalone-mongodb-instance" title="Permanent link">¶</a></h3>
<p>Using a separate server to host MongoDB increases reliability and lowers resource utilization for your SystemLink server.</p>
<p>You may use the supplied form input in <strong>NI SystemLink Sever Configuration</strong> when connecting to a server hosting a single standalone MongoDB instance. Refer to <a href="https://www.ni.com/documentation/en/systemlink/latest/setup/remote-mongo-database/">Connecting to a Remote Mongo Database</a> for more information.</p>
<h3 id="connecting-to-mongodb-with-replica-sets"><span class="enumerate-heading-plugin">7.4.2</span> Connecting to MongoDB with Replica Sets<a class="headerlink" href="#connecting-to-mongodb-with-replica-sets" title="Permanent link">¶</a></h3>
<p>Use replica sets to create redundancy in your database to mitigate against potential data loss. Refer to MongoDB for a <a href="https://docs.mongodb.com/manual/tutorial/deploy-replica-set/">tutorial on deploying replica sets</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>NI recommends <a href="https://docs.mongodb.com/manual/tutorial/configure-x509-member-authentication/">x.509 certificates</a> for replica set membership.</p>
</div>
<p>To successfully connect to a MongoDB replica set and create redundancy, you must specify a connection string in <strong>NI SystemLink Server Configuration</strong>.</p>
<ol>
<li>Log into the desktop of the SystemLink server with administrator privileges.</li>
<li>Open <strong>NI SystemLink Server Configuration</strong>.</li>
<li>Navigate to <strong>NoSqlDataBase</strong>.</li>
<li>
<p>Click the <strong>Connect to an externally managed NoSqlDatabase server</strong> radio button.</p>
<div class="admonition note">
<p class="admonition-title">Secure remote connections</p>
<p>NI recommends securing communications between your SystemLink server and MongoDB instance with TLS. For details, refer to <a href="/network-security/network-security/#tls-for-remote-mongodb-instances">TLS for Remote MongoDB Instances</a>.</p>
</div>
</li>
<li>
<p>Select the <strong>Use a custom connection string</strong> checkbox.</p>
</li>
<li>Enter your connection string. Refer to <a href="https://docs.mongodb.com/manual/reference/connection-string/">Connection String URI Format</a> for details on structuring your connection string.</li>
<li>Click <strong>Test Connection</strong> to ensure SystemLink can connect to the MongoDB instance.</li>
<li>If the connection test was successful, click <strong>Apply</strong> to restart SystemLink service manager and connect to the MongoDB instance.</li>
</ol>
<h3 id="connecting-to-mongodb-atlas"><span class="enumerate-heading-plugin">7.4.3</span> Connecting to MongoDB Atlas<a class="headerlink" href="#connecting-to-mongodb-atlas" title="Permanent link">¶</a></h3>
<p>MongoDB Atlas provides simpler setup and adminstration compared to self hosted replica sets and standalone deployments. MongoDB Atlas is a fully managed PaaS from MongoDB.</p>
<p>If you have not setup an Atlas cluster before, refer to <a href="https://docs.atlas.mongodb.com/getting-started/">Getting started with Atlas</a>. Refer to <a href="https://docs.mongodb.com/guides/cloud/connectionstring/">Setup Atlas Connectivity</a> for steps to obtain a connection string.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In the sample connection string provided by Atlas you will need to replace the instance of <code>myFirstDatabase</code> with <code>admin</code>. For example:</p>
<div class="highlight"><pre><span></span><code>mongodb+srv://&lt;username&gt;:&lt;password&gt;@&lt;cluster&gt;/myFirstDatabase?retryWrites=true&amp;w=majority
</code></pre></div>
<p>This will need to be updated to </p>
<div class="highlight"><pre><span></span><code>mongodb+srv://&lt;username&gt;:&lt;password&gt;@&lt;cluster&gt;/admin?retryWrites=true&amp;w=majority
</code></pre></div>
</div>
<div class="admonition important">
<p class="admonition-title">MongoDB Atlas free tier is unsupported by SystemLink</p>
<p>Due to memory constraints on the Atlas free tier, you must use a paid tier for SystemLink to successfully connect. SystemLink supports all paid tiers of Atlas. If you need assistance evaluating Atlas with SystemLink please contact NI (<a href="mailto:customer.requests@ni.com">customer.requests@ni.com</a>) or your local account manager.</p>
</div>
<p>Because Atlas uses replica sets by default, your SystemLink server could be affected by the bug in the third-party MongoDB driver used by SystemLink as described in <a href="#multi-node-deployments">7.4 Multi Node Deployments</a>. If you cannot use the <code>mongodb+srv://</code> URI format, use the connection string generated for the Node.js driver version 2.0.14. This provided connection string is fully supported by SystemLink.</p>
<hr/>
<div class="md-source-date">
<small>
    
      Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">April 30, 2021</span>
</small>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav aria-label="Footer" class="md-footer-nav__inner md-grid">
<a class="md-footer-nav__link md-footer-nav__link--prev" href="../FileService-MinIO/" rel="prev" title="Leverage File Service S3 for on-premises storage">
<div class="md-footer-nav__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</div>
<div class="md-footer-nav__title">
<div class="md-ellipsis">
<span class="md-footer-nav__direction">
                  Previous
                </span>
                Leverage File Service S3 for on-premises storage
              </div>
</div>
</a>
<a class="md-footer-nav__link md-footer-nav__link--next" href="../../python-dataplugins/python-dataplugins/" rel="next" title="Python DataPlugins">
<div class="md-footer-nav__title">
<div class="md-ellipsis">
<span class="md-footer-nav__direction">
                  Next
                </span>
                Python DataPlugins
              </div>
</div>
<div class="md-footer-nav__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"></path></svg>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
<div class="md-footer-copyright__highlight">
            Copyright © 2020 National Instruments Corporation
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
          Material for MkDocs
        </a>
</div>
</div>
</div>
</footer>
</div>
<script src="../../assets/javascripts/vendor.3636a4ec.min.js"></script>
<script src="../../assets/javascripts/bundle.e9fe3281.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
<script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
</body>
</html>